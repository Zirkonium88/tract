{{ $this := .CurrentSection }}

{{ with .FirstSection }}
<nav class="nav" role="navigation" aria-label="docs navigation">
  {{ template "section" . }}
</nav>
{{ end }}

{{ define "section" }}
{{ $id := .Title | urlize }}
<div class="nav-section">
  <header class="nav-section-header">
    <p class="nav-section-header-title">
      <a href="{{ .RelPermalink }}">
        {{ .Title }}
      </a>
    </p>
    {{ if .RegularPages }}
    <a href="#{{ $id }}-el" data-action="collapse" class="trigger nav-section-header-icon">
      <span class="icon">
        <ion-icon size="medium" name="arrow-dropdown"></ion-icon>
      </span>
    </a>
    {{ end }}
  </header>
  {{ with .RegularPages }}
  <div id="{{ $id }}-el" class="is-collapsible is-active">
    <div class="nav-section-content">
      <ul class="nav-section-links">
        {{ range . }}
        <li>
          <a href="{{ .RelPermalink }}">
            {{ .Title }}
          </a>
        </li>
        {{ end }}
      </ul>
    </div>
  </div>
  {{ end }}
</div>

{{ with .Sections }}
{{ range . }}
{{ template "section" . }}
{{ end }}
{{ end }}
{{ end }}
